{% extends 'base.html.twig' %}
{% block stylesheets %}
    <style>
.create-button {
    background-color: var(--primary-color);
    border: 0;
    border-radius: var(--border-radius-large) !important;
    color: var(--white-color);
    max-width: 150px;
    padding: 10px 20px; /* Ajouter du rembourrage pour une meilleure apparence du bouton */
    text-align: center; /* Centrer le texte */
    display: inline-block; /* Faire en sorte qu'il se comporte comme un bouton */
    text-decoration: none; /* Supprimer le soulignement */
    margin-bottom: 20px; /* Ajouter de l'espace entre le bouton et le bas */
}
 </style>
{% endblock %}
{% block body %}
    <!-- Section Explorer la Bibliothèque -->
    <section class="explore-section section-padding" id="section_2">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <h2 class="mb-4">Explorer la Bibliothèque</h2>
                </div>
            </div>
        </div>

        <!-- Onglets de Filtre par Genre -->
        <div class="container-fluid">
            <div class="row">
                <ul class="nav nav-tabs" id="genreTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="all-tab" data-genre="all" type="button" role="tab" aria-controls="all-tab-pane" aria-selected="true">Tous</button>
                    </li>
                    {% for genre in genres %}
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="{{ genre|lower }}-tab" data-genre="{{ genre }}" type="button" role="tab" aria-controls="{{ genre|lower }}-tab-pane" aria-selected="false">{{ genre }}</button>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </section>
    
   <!-- Section Index des Livres -->
<section>
    <!-- Grille des Livres -->
    <div class="container">
        <div class="row">
            {% for livre in livres %}
                <div class="col-lg-4 col-md-6 col-12 mb-4 livre-row" data-genre="{{ livre.genre }}">
                    <div class="custom-block bg-white shadow-lg">
                        <a href="{{ path('app_livre_show', {'id': livre.id}) }}">
                            <div class="d-flex">
                                <div>
                                    <h5 class="mb-2">{{ livre.titre }}</h5>
                                    <p class="mb-0">{{ livre.auteur }}</p>
                                </div>
                                <span class="badge bg-design rounded-pill ms-auto">{{ livre.genre }}</span>
                            </div>

                            {% if livre.imageCouverture %}
                                <img src="{{ asset('uploads/images/' ~ livre.imageCouverture) }}" class="custom-block-image img-fluid" alt="Image de couverture">
                            {% else %}
                                <div class="custom-block-image img-fluid bg-light d-flex align-items-center justify-content-center">
                                    <p class="text-muted">Aucune image</p>
                                </div>
                            {% endif %}
                        </a>

                       <div class="d-flex justify-content-between mt-3">
    <a href="{{ path('app_livre_edit', {'id': livre.id}) }}" class="btn btn-sm btn-outline-primary">Modifier</a>
    <form action="{{ path('app_livre_delete', {'id': livre.id}) }}" method="post" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce livre ?');">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ livre.id) }}">
        <button type="submit" class="btn btn-sm btn-outline-danger">Supprimer</button>
    </form>
</div>
                    </div>
                </div>
            {% else %}
                <div class="col-12">
                    <div class="no-records text-center">
                        <p>Aucun enregistrement trouvé</p>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

 <div class="col-lg-4 col-12 ms-auto">
    <a href="{{ path('app_livre_new') }}" class="create-button">Créer</a>
</div>

<section class="contact-section section-padding section-bg" id="section_5">
    <div class="container">
        <div class="row">

            <div class="col-lg-12 col-12 text-center">
                <h2 class="mb-5">Une expérience à attendre avec impatience</h2>
            </div>

            <div class="col-lg-5 col-12 mb-4 mb-lg-0">
<iframe class="google-map" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3035.1332484834716!2d10.297478475647058!3d36.83944667223597!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12fd4ad74bdd8285%3A0x58721aef6c2db516!2sLe%20Kram%20-%20Exhibition%20and%20International%20Trade%20Center%20of%20Tunis!5e1!3m2!1sen!2sth!4v1740497472546!5m2!1sen!2sth" width="100%" height="250" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>

            <div class="col-lg-3 col-md-6 col-12 mb-3 mb-lg- mb-md-0 ms-auto">
                <h4 class="mb-3">Lieu de l'Événement</h4>
                <p>Kram, Tunisie</p>
                <hr>
                <p>Date : du 25 avril au 4 mai 2025</p>
            </div>

            <div class="col-lg-3 col-md-6 col-12 mx-auto">
                <h4 class="mb-3">Informations de Contact</h4>
                <p>Si vous avez des questions, n'hésitez pas à nous contacter :</p>
                <hr>
                <p class="d-flex align-items-center mb-1">
                    <span class="me-2">Lien</span>
                    <a href="https://foire.e-festivals.tn" class="site-footer-link">
                        https://foire.e-festivals.tn
                    </a>
                </p>
                <p class="d-flex align-items-center">
                    <span class="me-2">Email</span>
                    <a href="foiredulivre@enpfmca.gov.tn" class="site-footer-link">
                        foiredulivre@enpfmca.gov.tn
                    </a>
                </p>
            </div>

        </div>
    </div>
</section>

    <!-- JavaScript pour le Filtrage par Genre -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const filterButtons = document.querySelectorAll('.nav-link');
            const livreRows = document.querySelectorAll('.livre-row');

            filterButtons.forEach(button => {
                button.addEventListener('click', function () {
                    // Supprimer la classe active de tous les boutons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Ajouter la classe active au bouton cliqué
                    this.classList.add('active');

                    const selectedGenre = this.getAttribute('data-genre');

                    // Filtrer les lignes en fonction du genre
                    livreRows.forEach(row => {
                        const rowGenre = row.getAttribute('data-genre');
                        if (selectedGenre === 'all' || rowGenre === selectedGenre) {
                            row.style.display = '';
                        } else {
                            row.style.display = 'none';
                        }
                    });
                });
            });
        });
    </script>
{% endblock %}
