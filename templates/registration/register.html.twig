{% extends 'base2.html.twig' %}

{% block title %}Inscription{% endblock %}

{% block body %}
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <h1 class="text-center">Inscription</h1>

                {# Affichage des messages flash #}
                {% for message in app.flashes('error') %}
                    <div class="alert alert-danger">
                        {{ message }}
                    </div>
                {% endfor %}
                {% for message in app.flashes('success') %}
                    <div class="alert alert-success">
                        {{ message }}
                    </div>
                {% endfor %}

                {# Affichage des erreurs du formulaire #}
                {{ form_start(registrationForm, {'attr': {'class': 'mt-4'}}) }}

                    <div class="mb-3">
                        {{ form_label(registrationForm.username, "Nom d'utilisateur", {'label_attr': {'class': 'form-label'}}) }}
                        {{ form_widget(registrationForm.username, {'attr': {'class': 'form-control', 'required': true, 'minlength': 3, 'maxlength': 50}}) }}
                        {{ form_errors(registrationForm.username) }}
                    </div>

                    <div class="mb-3">
                        {{ form_label(registrationForm.email, "Email", {'label_attr': {'class': 'form-label'}}) }}
                        {{ form_widget(registrationForm.email, {'attr': {'class': 'form-control', 'required': true, 'type': 'email'}}) }}
                        {{ form_errors(registrationForm.email) }}
                    </div>

                    <div class="mb-3">
                        {{ form_label(registrationForm.numeroTelephone, "Numéro de téléphone", {'label_attr': {'class': 'form-label'}}) }}
                        {{ form_widget(registrationForm.numeroTelephone, {'attr': {'class': 'form-control', 'required': true, 'pattern': '[0-9]{8}'}}) }}
                        {{ form_errors(registrationForm.numeroTelephone) }}
                    </div>

                    <div class="mb-3">
                        {{ form_label(registrationForm.adresse, "Adresse", {'label_attr': {'class': 'form-label'}}) }}
                        {{ form_widget(registrationForm.adresse, {'attr': {'class': 'form-control', 'required': true, 'maxlength': 255}}) }}
                        {{ form_errors(registrationForm.adresse) }}
                    </div>
                                        <div class="mb-3">
                        {{ form_row(registrationForm.roles, {
                            'attr': {'class': 'form-control'},
                            'label_attr': {'class': 'form-label'},
                            'label': 'Rôles'
                        }) }}
                    </div>

                    <div class="mb-3">
                        {{ form_label(registrationForm.plainPassword, "Mot de passe", {'label_attr': {'class': 'form-label'}}) }}
                        {{ form_widget(registrationForm.plainPassword, {'attr': {'class': 'form-control', 'required': true, 'minlength': 6, 'maxlength': 50}}) }}
                        {{ form_errors(registrationForm.plainPassword) }}
                    </div>

                    <div class="mb-3 form-check">
                        {{ form_widget(registrationForm.agreeTerms, {'attr': {'class': 'form-check-input', 'required': true}}) }}
                        {{ form_label(registrationForm.agreeTerms, "J'accepte les conditions d'utilisation", {'label_attr': {'class': 'form-check-label'}}) }}
                        {{ form_errors(registrationForm.agreeTerms) }}
                    </div>

                    <button type="submit" class="btn btn-primary w-100">S'inscrire</button>

                    <div class="mt-3 text-center">
                        <p>Vous avez déjà un compte ? <a href="{{ path('app_login') }}">Connectez-vous ici</a>.</p>
                    </div>

                {{ form_end(registrationForm) }}
            </div>
        </div>
    </div>
{% endblock %}